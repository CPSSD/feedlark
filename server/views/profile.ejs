<% include partials/header.ejs %>

<div class="container">
  <div class="row">
    <% include partials/setting_nav.ejs %>
    <div class="col s12 m9">
      <div class="row">
        <div class="col s12">
          <h5>Email Settings</h5>
          <p>You will need to reverify your email.</p>
        </div>


        <form method="POST" action="/user/change/email">
          <div class="input-field col s12 m6">
            <input id="newEmail" name="newEmail" type="email" class="validate" required>
            <label for="oldPassword2">Enter new email</label>
          </div>
          <div class="input-field col s12 m6">
            <button class="btn waves-effect waves-light" type="submit" name="changePassword">Change Email
              <i class="material-icons right">send</i>
            </button>
          </div>
        </form>

        <div class="col s12">
            <h5>Password Settings</h5>
        </div>
        <form method="POST" action="/user/change/password">
          <div class="input-field col s12 m6">
            <input id="oldPassword1" name="oldPassword1" type="password" class="validate" required>
            <label for="oldPassword1">Enter old password</label>
          </div>
          <div class="input-field col s12 m6">
            <input id="newPassword" name="newPassword" type="password" class="validate" required>
            <label for="oldPassword2">Enter new Password</label>
          </div>
          <div class="input-field col s12 m6">
            <input id="newPassword2" name="newPassword2" type="password" class="validate" required>
            <label for="newPassword">Confirm new Password</label>
          </div>
          <div class="input-field col s12 m6">
            <button class="btn waves-effect waves-light" type="submit" name="changePassword">Change Password
              <i class="material-icons right">send</i>
            </button>
          </div>
        </form>
        <div class="col s12">
            <h5>User Defaults</h5>
        </div>

        <form class="col s12" method="POST" id="page_length" action="/user/change/page-length">
          <h6> Page Length </h6>
          <div class="input-field col s12 m6">
            <select name="page_length" form="page_length">
              <option<%= user.page_length == 5 ? ' selected' : '' %>>5</option>
              <option<%= user.page_length == 10? ' selected' : '' %>>10</option>
              <option<%= user.page_length == 20? ' selected' : '' %>>20</option>
              <option<%= user.page_length == 50? ' selected' : '' %>>50</option>
            </select>
            <label for="page_length">Items per page</label>
          </div>
          <div class="input-field col s12 m6">
            <button class="btn waves-effect waves-light" type="submit" name="send">Save Options
          </div>
        </form>


        <form class="col s12" method="POST" action="/user/change/summaryinterval">
          <h5>Change email summary interval:</h5>
          <div class="input-field col s2">
          <!-- Changes to the options here need to be reflected in the users controller -->
            <select id="summaryInterval" name="summaryInterval" class="validate" required>
              <option <%= (user.summaryInterval == "0")? "selected": "" %>>off</option>
              <option <%= (user.summaryInterval == "24")? "selected": "" %>>daily</option>
              <option <%= (user.summaryInterval == "168")? "selected": "" %>>weekly</option>
              <option <%= (user.summaryInterval == "5040")? "selected": "" %>>monthly</option>
            </select>
            <label for="summaryInterval">New interval</label>
          </div>
          <div class="input-field col s4">
            <button class="btn waves-effect waves-light" type="submit" name="changeInterval">Change Interval
              <i class="material-icons right">send</i>
            </button>
          </div>
        </form>

      </div>
    </div>
  </div>
</div>

<% include partials/footer.ejs %>
